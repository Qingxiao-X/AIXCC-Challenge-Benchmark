diff --git a/src/main/java/org/apache/commons/compress/archivers/examples/Expander.java b/src/main/java/org/apache/commons/compress/archivers/examples/Expander.java
index 908d4d447..31f62c19a 100644
--- a/src/main/java/org/apache/commons/compress/archivers/examples/Expander.java
+++ b/src/main/java/org/apache/commons/compress/archivers/examples/Expander.java
@@ -41,6 +41,11 @@
 import org.apache.commons.compress.archivers.tar.TarFile;
 import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
 import org.apache.commons.compress.archivers.zip.ZipFile;
+import org.apache.commons.compress.compressors.CompressorException;
+import org.apache.commons.compress.compressors.CompressorStreamFactory;
+import org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream;
+import org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream;
+import org.apache.commons.compress.compressors.gzip.GzipParameters;
 import org.apache.commons.io.IOUtils;
 import org.apache.commons.io.output.NullOutputStream;
 
@@ -200,11 +205,40 @@ public void expand(final InputStream archive, final File targetDirectory, final
      * @since 1.22
      */
     public void expand(final Path archive, final Path targetDirectory) throws IOException, ArchiveException {
+        try (InputStream is = new BufferedInputStream(Files.newInputStream(archive))){
+            String streamType = CompressorStreamFactory.detect(is);
+            decompress(streamType, archive, targetDirectory);
+            return;
+        } catch (CompressorException e) {
+            //swallow
+        }
+
         try (InputStream inputStream = new BufferedInputStream(Files.newInputStream(archive))) {
             expand(ArchiveStreamFactory.detect(inputStream), archive, targetDirectory);
         }
     }
 
+    private void decompress(String streamName, Path archive, Path targetDirectory) throws IOException, CompressorException {
+        try (InputStream is = CompressorStreamFactory.getSingleton()
+                .createCompressorInputStream(streamName, Files.newInputStream(archive))) {
+            String fileName = "decompressed.bin";
+            if (is instanceof GzipCompressorInputStream) {
+                GzipParameters parameters = ((GzipCompressorInputStream)is).getMetaData();
+                fileName = parameters.getFileName();
+
+            }
+            Path target = targetDirectory.resolve(fileName).toAbsolutePath().normalize();
+            if (! target.startsWith(targetDirectory.toAbsolutePath().normalize())) {
+                throw new IOException("zip slip?! " + target +
+                        " is not in " + targetDirectory + " for filename=" + fileName);
+            }
+            if (! Files.isDirectory(target.getParent())) {
+                Files.createDirectories(target.getParent());
+            }
+            Files.copy(is, target);
+        }
+    }
+
     /**
      * Expands {@code archive} into {@code targetDirectory}.
      *
